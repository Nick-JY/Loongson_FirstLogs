---
title: Verilog
---

### verilog

##### 1.简介

*  怎么用来进行电路简化和建模？

* 特性：

  * 三种方式建模：
    * 过程化结构
    * 连续赋值语句
    * 门和模块例化语句  （？）
  * 数据类型
    * wire
      * 物理元件之间的连线
    * reg
      * 抽象的数据存储元件
    * 可以层级设计
    * ==原语==是什么？
    * 支持其他编程语言接口 
      * 允许外部函数访问模块内部信息
      * 因此测试方法更加丰富（怎么测试）
      * 模拟激励是什么？如何生成指定测试的约束条件？
      * 设计逻辑功能时可以不用关心工艺、温度等因素
  * ASIC 
    * 专用集成电路
      * 具有专门用途和特殊功能的独立集成电路器件
  * 应用
    * 生成ASIC
      * 途径
        * 可编程逻辑器件
          * 主流器件：FPGA、CPLD
        * 半定制或全定制ASIC
          * 利用Verilog来设计具有某种特殊功能的专用芯片
            * 根据工艺分类
              * 门阵列ASIC
              * 标准单元ASIC
              * 全定制ASIC
        * 混合ASIC
          * 具有面向用户的FPGA可编程逻辑功能和逻辑资源，同时含有可方便调用和配置的硬件标准单元模块，CPU,==锁相环==是什么，乘法器

* 环境搭建

  * 仿真是什么？
  * Quartus II
  * Modelsim

* 设计方法

  * 需求分析
  * 功能划分
  * 文本描述
  * 前仿真（没有考虑信号延迟等）
  * 逻辑综合
    * 产生物理电路门级结构
    * 将建模转化为门级列表
  * 对门级电路进行布局布线
  * 后仿真

  #####　2.基本语法

  ###### 2.1

  * 标识符 
    * 字母、数字、美元符号、下划线
  * 关键字全部是小写
  * 数值逻辑
    * 0
    * 1
    * X 
      * 实际电路里，信号可能为1，也可能为0
    * Z
      * 表示==高阻==
        * 例如信号没有驱动时的逻辑结果

  ###### 2.2

  * 整数数值

    * `'d` 十进制
    * `'b` 二进制
    * `'o` 八进制
    * `'h` 十六进制
    * 指明位宽
    * 负数 
      * 在指明位宽的数字前面加上一个减号

  * 实数

    * 十进制

      ```verilog
      30.123
      6.0
      0.001
      ```

    * 科学计数法

      ```
      1.2e4     //表示12000
      1_0001e4  //表示100010000，下划线是为了便于阅读
      1E-3      //表示0.001 
      ```

  * 字符串

    * 用双引号包起来的字符序列
    * 不能多行书写，也就是字符串中不能包含回车符
    * $Verilog$ 把字符串当作一系列的单字节ASCII 字符队列
      * 存储字符串"www.runoob.com"需要14 * 8 bit 的存储单元

###### 2.3

* 基本数据类型
  * wire
  * reg

* 线网
  * 硬件单元之间的物理连线
  * 与其连接的器件输出端连续驱动
  * 如果没有驱动元件连接到wire型 变量，则缺省值一般为Z
  
* 寄存器

  * 表示存储单元

  * 会保存原有的值，直到被改写

  * 声明

    ```verilog
    reg clk_temp;
    reg flag1,flag2;
    //和C语言的变量声明一样
    ```

  * 不需要驱动源，也不一定需要时钟信号

  * 仿真时可以在任意时刻通过赋值操作进行改写

    ```verilog
    reg rstn;
    initial begin
        rstn = 1'b0;
        #100;
    ```

    ###### 向量

    * 位宽大于1时

    * wire/reg 可声明为向量的形式

      ```verilog
      reg [3:0] 	counter;  //声明四位宽的寄存器
      wire [32-1:0] gpio_data; //32bit
      wire [8:2]	 addr;    //7bit
      
      ```

    * 整数、实数、时间

      * 都属于寄存器类型

    * 整数

      * 关键字
        * integer
      * 位宽与编译器有关，一搬为32bit
      * integer 型变量为有符号数

    * 实数

      * 关键字
        * real
      * 声明不能带有范围，默认值为0
      * 如果赋值给一个整数
        * 只有实数的整数部分会赋给整数

    * 时间

      * 关键字
        * time
      * 用于对仿真时间进行保存
      * 宽度一般为64 bit
      * 调用系统函数$time 获取当前仿真时间

    * 数组

    * 存储器

      * 一种寄存器数组
      * 可以描述RAM 或ROM的行为

    * 参数

      * 表示常量
      * 关键字
        * parameter
      * 只能赋值一次
      * 可以通过实例化改变参数在模块中的值

    * 局部参数

      * 声明关键字
        * localparam
          * 参数只在本模块中调用时

    * 字符串

      * 保存在reg型变量中
      * 每个字符占一个字节（8bit）
        * 寄存器变量的宽度应该足够大以保证不会溢出
      * if 寄存器变量的宽度大于字符串的大小
        * 使用0来填充==左边==的空余位
      * if 寄存器变量的宽度小于字符串大小
        * ==截去字符串左边多余的数字==

    * 转义字符

    * 可以使用string 关键字来定义字符串类型

    * 表达式

      * 操作符
        * 算术
        * 关系
        * 等价
        * 逻辑
        * 按位
        * ==归约==
        * 移位
          * 算术
          * 逻辑
        * ==拼接==
        * ==条件操作符==
      * 操作数
        * 任意数据类型

    * 编译指令

      * `define 类似于 C里的#define
      * `undef 
        * 取消之前的宏定义
      *  `elsif 
      * `else
      * `ifdef
      * `endif 
      * `include 类似 C里的 #include 
      * `timescale 
        * 将时间单位与实际时间相关联
      * `default_nettype
        * 没有被声明的连线定义为线网类型
      * `resetall
      * `celldefine
      * `endcelldefine
      * `unconnected_drive
      * `nounconnected_drive
    
    
    
    ###### ==3.1==
    
    * 连续赋值
    
      * 用于对wire型变量赋值
      * 关键词    assign
        * 任何已经声明wire变量的赋值语句都是以**assign**开头
    
  * 时延
  
    * 
