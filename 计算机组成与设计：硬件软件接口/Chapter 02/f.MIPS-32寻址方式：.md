## MIPS-32寻址方式：
##### 1.寄存器寻址：
- 寄存器寻址最为简单，所有的R型指令都采用寄存器寻址的方式，CPU通过寄存器的编号来找到相应的寄存器。
##### 2.立即数寻址：
![](https://nickaljy-pictures.oss-cn-hangzhou.aliyuncs.com/立即数寻址.png)
- 立即数寻址指的就是I型指令中的立即数指令，立即数直接作为指令中的常数，不需要在存储器中进行寻找。
##### 3.基地址寻址：
![](https://nickaljy-pictures.oss-cn-hangzhou.aliyuncs.com/基地址寻址.png)
- 对于I型指令，在其中一个寄存器中存储内存中的某一个基地址，然后把16位立即数作为在该基地址上的偏移量，从而实现寻址，I指令后面的16位立即数能够覆盖的存储空间为：- $2^{15}$ ~ $2^{15} - 1$ (byte)，大约是64KB。
- 由于这个寻址空间比较小，因此很多时候我们都把这个立即数符号扩展成32位，再与一个寄存器相加，得到的值作为偏移量。
	- 为什么要符号扩展？因为这样可以表示：-$2^{31}$ ~ $2^{31} - 1$(byte)，大约是4GB。
- lw、sw等执行内存和寄存器交换的指令都使用基地址寻址，即一个寄存器存储内存中的某一段空间的基址。
##### 4.PC相对寻址：
[![xCVthj.png](https://s1.ax1x.com/2022/09/19/xCVthj.png)](https://imgse.com/i/xCVthj)
- 为了扩大寻址空间，有一些指令的便宜量不是以字节为单位，而是以字为单位。
- 我们首先来了解一下PC，PC在MIPS-32中不是通用寄存器，PC中存储的是处理器当前运行指令的地址。
- PC相对寻址指的是从PC的下一条指令开始寻址，注意此时是把PC + 4作为寻址的基址，偏移量还是16位的立即数，但是这个16位的立即数是以字为单位的，偏移1位相当于字节中偏移4位，因此对应字节有18位(左移两位表示乘4)。
- 此时的寻址空间大小：-$2^{17}$ ~ $2^{17} - 1$ ,大约是128KB。
- 条件分支指令通常都使用PC相对寻址。
``bne $t0 , $t1 , 2500``表示的是跳转到PC+4+4x2500这个地址处。因此指令中的这个偏移量就是以字为单位的。
- 我们可以认为PC寻址的基础是基地址寻址。
##### 5.伪直接寻址：
![](https://nickaljy-pictures.oss-cn-hangzhou.aliyuncs.com/伪直接寻址.png)
- J型指令的操作位是6位，地址位是26位，伪直接寻址指的是把J型指令中的26位与PC中的高4位进行拼接操作。
- 如何拼接？
	- 我们把J指令中的地址位当成“字”地址，那么一共可以表示$2^{26}$个字的大小空间。
	- 这$2^{26}$个字正好对应这$2^{28}$个字节。
	- 把这26位左移两位(无符号左移，补0)，然后与PC高四位拼接。
	- 之后这个地址就可以表示与PC高4位相同的所有地址了。
	- 寻址空间：$2^{28}$byte，大约256MB。
###### 疑问解答：
- 对于拼接的32位地址，只有26位是可变的，为什么能代表$2^{28}$byte呢？
	- 实际上，如果这26位代表的是字节，那么确实只能寻址64MB，但是我们规定这26位表示的是字，26bit+00已经能够表示$2^{26}$个字的地址，这些字能够对应上$2^{28}$byte，而不是说我完全得到这么多个字节地址，我只需要直到所在的字就可以了。
	- 并且，我们在指令后面加的数字也是表示的字地址。``j 2500``表示跳转到10000字节处，很显然有些字节地址我们是无法得到的，但却覆盖了这么多字节。